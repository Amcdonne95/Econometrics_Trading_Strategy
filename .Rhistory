getwd()
install.packages('dplyr')
install.packages("data.table")
library(dplyr)
library(data.table)
#loads the initial data
load('TEST_data_subset.RData')
#turns the dataframe into a r table object
df = tbl_df(data_mining)
remove(data_mining)
df(head)
head(df)
install.packages('lubridate')
library(lubridate)
df %>%
dplyr::mutate(year = lubridate::year(date),
month = lubridate::month(date),
day = lubridate::day(date))
tail(df)
numYears = tail(df$date, n=1) - head(df$date, n=1)
tail(df$date, n=1)
numYears = tail(df$year, n=1) - head(df$year, n=1)
numYears = tail(year, n=1) - head(year, n=1)
head(df)
df = df %>%
dplyr::mutate(year = lubridate::year(date),
month = lubridate::month(date),
day = lubridate::day(date))
numYears = tail(df$year, n=1) - head(df$year, n=1)
numMonths = numYears*12
#install.packages('dplyr')
#install.packages("data.table")
#install.packages('lubridate')
library(dplyr)
library(data.table)
library(lubridate)
#loads the initial data
load('TEST_data_subset.RData')
#turns the dataframe into a r table object
df = tbl_df(data_mining)
remove(data_mining)
df = df %>%
dplyr::mutate(year = lubridate::year(date),
month = lubridate::month(date),
day = lubridate::day(date))
numYears = tail(df$year, n=1) - head(df$year, n=1)
numMonths = numYears*12
head(df)
unique(filter(df, day=1))
unique(filter(df, day==1))
df = arrange(df, date)
df = arrange(df, date, permno)
df
sicCodeRange = c(c(0100, 0999),c(1000, 1499), c(1500, 1799), c(1800, 1999), c(2000, 3999),
c(4000, 4999), c(5000, 5199), c(5200, 5999), c(6000, 6799), c(7000, 8999),
c(91000, 9729), c(9900, 9999))
sicDivision = c('Agriculture, Forestry and Fishing', 'Mining', 'Construction',
'not used','Manufacturing', 'Transportation, Communications, Electric, Gas and Sanitary service',
'Wholesale Trade', 'Retail Trade', 'Finance, Insurance and Real Estate',
'Services', 'Public Administration', 'Nonclassifiable')
sicCodeRange[1]
sicCodeRange = c(0100, 0999, 1000, 1499, 1500, 1799, 1800, 1999, 2000, 3999,
4000, 4999, 5000, 5199, 5200, 5999, 6000, 6799, 7000, 8999,
91000, 9729, 9900, 9999)
sicDivision = c('Agriculture, Forestry and Fishing', 'Mining', 'Construction',
'not used','Manufacturing', 'Transportation, Communications, Electric, Gas and Sanitary service',
'Wholesale Trade', 'Retail Trade', 'Finance, Insurance and Real Estate',
'Services', 'Public Administration', 'Nonclassifiable')
library(dplyr)
library(data.table)
library(lubridate)
load('TEST_data_subset.RData')
df = tbl_df(data_mining)
remove(data_mining)
df = df %>%
dplyr::mutate(year = lubridate::year(date),
month = lubridate::month(date),
day = lubridate::day(date))
head(df)
df = select(df, -cap)
dfReduced = data.table(
permno = integer(),
sic = double(),
year = double(),
month = double(),
day = double(),
return = double()
)
?range
